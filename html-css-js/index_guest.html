<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>UWIT-Bronson</title>
    <!-- <link rel="icon" type="image/x-icon" href="favicon.ico"> -->
    <iframe id="content" style ="display:none;"></iframe>
    <link rel="stylesheet" type="text/css" href="page.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Contrail+One&family=Racing+Sans+One&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <script src="checkerboard.js" type="text/javascript" charset="utf-8"></script>
    <script src="camcode.js" type="text/javascript" charset="utf-8"></script>
    <script src="cc-altmode.js" type="text/javascript" charset="utf-8"></script>
    <script src="jacknet.js" type="text/javascript" charset="utf-8"></script>
    <!-- <script src="signing.js" type="text/javascript" charset="utf-8"></script> -->
    <script src="wiki.js" type="text/javascript" charset="utf-8"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script type="text/javascript">
      window.addEventListener("popstate", () => {
        console.log(location.href);
        if (location.pathname == "/checker") {
          setChecker();
        } else if (location.pathname == "/jacknet") {
          setJackNet();
        } else if (location.pathname == "/cc-altmode") {
          setCrestronFile();
        } else if (location.pathname == "/wiki") {
          setWiki();
        } else {
          setDashboard();
        }
      },
      false,
      );

      function toggleMenu() {
        const menu = document.querySelector(".hb_menu");
        const menuIcon = document.querySelector(".menuIcon");
        const closeIcon = document.querySelector(".closeIcon");
        if (menu.classList.contains("showMenu")) {
          menu.classList.remove("showMenu");
          closeIcon.style.display = "none";
          menuIcon.style.display = "block";
        } else {
          menu.classList.add("showMenu");
          closeIcon.style.display = "block";
          menuIcon.style.display = "none";
        }
      }

      // setDashboard()
      function setDashboard() {
        const menuItems = document.querySelectorAll(".menuItem");
        const hamburger = document.querySelector(".hamburger");

        hamburger.addEventListener("click", toggleMenu);

        document.title = "Dashboard - Bronson";
        let active_tab_header = document.querySelector('.active_tab_header');
        active_tab_header.innerHTML = 'Dashboard';
        history.pushState({}, "Dashboard", "/");

        let prog_guts = document.querySelector('.program_board .program_guts');

        let db_container = document.createElement("div");
        db_container.classList.add("db_container");
        // db_container.innerHTML = `
        //   <p class='active_tab_header'>
        //     Dashboard </p>`;

        // Console Output
        let consoleOutput = document.createElement("div");
        consoleOutput.classList.add('db_console');
        consoleOutput.innerHTML = `
          <fieldset>
              <legend> 
                  Messages: </legend>
              <textarea readonly rows="20" cols ="75" class="innerConsole" name="consoleOutput" spellcheck="false"> 
                  Welcome to Bronson!
              </textarea>
          </fieldset>`;
    
        db_container.appendChild(consoleOutput);

        let main_container = document.createElement('div');
        main_container.appendChild(db_container);
        main_container.classList.add('program_guts');
        prog_guts.replaceWith(main_container);
        return;
      }

      function initForm() {
        document.getElementById('bug_report_modal').style.display='block';
        let bodies = document.getElementsByClassName('program_guts')
        for (let i=0; i<bodies.length; i++) {
          bodies[i].style.display='none';
        }
        toggleMenu();
      }

      function terminateForm() {
        document.getElementById('bug_report_modal').style.display='none';
        let bodies = document.getElementsByClassName('program_guts')
        for (let i=0; i<bodies.length; i++) {
          bodies[i].style.display='block';
        }
      }

      var modal = document.getElementById('bug_report_modal');
      window.onclick = function(event) {
        if (event.target == modal) {
          terminateForm();
        }
      }
    </script>
  </head>
  <!-- body -->
  <body onload="setDashboard()">
    <div class="program_board">
      <!-- Website Header (Doesn't Change) -->
      <div class="program_header">
        <!-- Hamburger Menu Declaration -->
        <div class="hb_menu">
          <fieldset class="ph_fieldset">
            <legend class="ph_legend">
              Menu:</legend>
            <button class="headButton siteButton" onclick="toggleMenu()">Back</button>
            <button class="headButton siteButton">Help / FAQ </button>
            <button class="headButton siteButton" onclick="initForm()">Report Bug</button>
          </fieldset>
          <fieldset class="ph_fieldset">
            <legend class="ph_legend">
              Sites:</legend>
            <button id="TimeClockURL" onclick="window.open('https://shibboleth.uwyo.edu/idp/profile/SAML2/Unsolicited/SSO?providerId=https://9922.tcplusondemand.com&shire=https://9922.tcplusondemand.com/api/v0000/saml2Sessions/0/Saml2SingleSignOnEmployeePost&target=CompanyNamespace%3d9922%3bCompanyId%3d1%3bRedirectPat');" type="button" class="headButton siteButton">
              TimeClock </button>
            <button id="lsmURL" onclick="window.open('https://uwyo.talem3.com/lsm/login/auth');" type="button" class="headButton siteButton">
              LSM </button>
            <button id="tdURL" onclick="window.open('https://uwyo.teamdynamix.com/TDNext/Home/Desktop/Default.aspx');" type="button" class="headButton siteButton">
              TeamDynamix </button>
            <button id="25lURL" onclick="window.open('https://25live.collegenet.com/pro/uwyo#!/home/dash');" type="button" class="headButton siteButton">
              25Live </button>
            <button id="campusMapURL" onclick="window.open('https://uwoperations.uwyo.edu/portal/apps/webappviewer/index.html?id=66a9c83b1d92419d8579562ed0a6259b');" type="button" class="headButton siteButton">
              Campus Map </button>
          </fieldset>
        </div>

        <!-- Site Button -->
        <h1 class='site_header' onclick='setDashboard()'>
          Bronson</h1>
        
        <!-- Currently Selected Page -->
        <h2 class='active_tab_header'>
          Dashboard</h2>

        <!-- Tool Button / Middle Section-->
        <div class="middle_section">
          <button class="headButton hamburger">
            <i class="menuIcon material-icons">menu</i>
            <i class="closeIcon material-icons" style="display: none;">close</i>
          </button>

          <!-- Message -->
          <p class='message_header'>
            <i>The swiss army knife for the U.W.I.T. department</i></p>
          <div class="tab_row">
            <button id="CBButton" onclick="setChecker()" type="button" class="headButton toolTab chTab trapezoid"><span>
              Checkerboard </span></button>
            <button id="JNButton" onclick="setJackNet()" type="button" class="headButton toolTab jnTab">
              JackNet </button>
            <button id="CCButton" onclick="setCrestronFile()" type="button" class="headButton toolTab ccTab">
              CamCode </button>
            <button id="wiki" onclick="setWiki()" type="button" class="headButton toolTab wikiTab">
              Wiki </button>
          </div>
        </div>
      </div>
      <br>
      <!-- <p> Local dashboard of stuff // maybe a feed</p> -->
      <div id="bug_report_modal" class="modal" style="display:none;">
        <form class="modal-content animate" action="/bugreport" method="post">
          <div class="login_imgcontainer">
            <span onclick="terminateForm()" class="close" title="Close Modal">&times;</span>
            <img src="logo.png" alt="Avatar" class="avatar">
          </div>
        
          <div class="container" id="entry_field">
            <label for="title"><b>Title</b></label>
            <input type="text" placeholder="Briefly Describe Your Issue" name="title" required>
      
            <label for="desc"><b>Description</b></label>
            <input type="text" placeholder="Give More Detail" name="desc">
          </div>
      
          <div class="container">
            <button type="button" class="headButton" onclick="terminateForm()" class="cancelbtn">Cancel</button>
            <button class="headButton" style="float: right;" type="submit">Done</button>
          </div>
        </form>
      </div>
      <div class="program_guts">
      </div>
    </div>
  </body>
</html>
