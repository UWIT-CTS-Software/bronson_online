<!-- HTML 5 -->
<!DOCTYPE html>
<html>
  <head>
    <title>UWIT-Bronson Admin</title>
    <meta charset="UTF-8" />
    <iframe id="content" style ="display:none;"></iframe>
    <link rel="stylesheet" type="text/css" href="page.css">
    <script src="https://cdn.jsdelivr.net/npm/jquery"></script>
    <script src="https://cdn.jsdelivr.net/npm/jquery.terminal/js/jquery.terminal.min.js"></script>
    <script src="admin_tools.js"></script>
    <!-- <script src="bronson-manager.js"></script> -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jquery.terminal/css/jquery.terminal.min.css"/>
    <script type="text/javascript">
      $(document).ready(function() {
        $.get("index.html", function(data){
          $("#prog_placeholder").replaceWith(data);
          setDashboard();
          setAdminBronson();
        });
      })

      $(function() {
        $('#terminal').terminal(function(command) {
            fetch("terminal", {
              method: "POST",
              body: command
            }).then((response) => {
              if (!response.ok) {
                this.echo("Error");
              }
              if (response.headers.get("Content-Type") == "application/octet-stream") {
                return response.blob();
              } else {
                return response.json();
              }
            }).then((data) => {
              if (data instanceof Blob) {
                const url = URL.createObjectURL(data);
                const a = document.createElement("a");

                a.href = url;
                a.download = "output.log";
                a.click();
              } else {
                this.echo(data.response);
              }
            })
        }, {
          checkArity: false,
          greetings: greetings.innerHTML
        });
      });
    </script>
    <template id='greetings'>
$$$$$$$$\                                $$\                     $$\ 
\__$$  __|                               \__|                    $$ |
   $$ | $$$$$$\   $$$$$$\  $$$$$$\$$$$\  $$\ $$$$$$$\   $$$$$$\  $$ |
   $$ |$$  __$$\ $$  __$$\ $$  _$$  _$$\ $$ |$$  __$$\  \____$$\ $$ |
   $$ |$$$$$$$$ |$$ |  \__|$$ / $$ / $$ |$$ |$$ |  $$ | $$$$$$$ |$$ |
   $$ |$$   ____|$$ |      $$ | $$ | $$ |$$ |$$ |  $$ |$$  __$$ |$$ |
   $$ |\$$$$$$$\ $$ |      $$ | $$ | $$ |$$ |$$ |  $$ |\$$$$$$$ |$$ |
   \__| \_______|\__|      \__| \__| \__|\__|\__|  \__| \_______|\__|
    </template>
  </head>
  <!-- body -->
  <body>
    <div class="program_board" id="prog_placeholder">
    </div>
    <footer id="terminal"></footer>
  </body>
</html>